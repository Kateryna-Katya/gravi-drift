{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\n    // 1. Инициализация иконок и плавного скролла\n    lucide.createIcons();\n\n    const lenis = new Lenis({\n        smooth: true,\n        lerp: 0.1\n    });\n\n    function raf(time) {\n        lenis.raf(time);\n        requestAnimationFrame(raf);\n    }\n    requestAnimationFrame(raf);\n\n    // 2. Three.js Hero Animation\n    initThreeJS();\n\n    // 3. Исправленные GSAP Анимации (Секция с правками)\n    initGSAP();\n\n    // 4. Мобильное меню\n    initMobileMenu();\n\n    // 5. Логика формы\n    initForm();\n\n    // 6. Cookie Popup\n    initCookies();\n});\n\n// --- THREE.JS HERO (Без изменений) ---\nfunction initThreeJS() {\n    const container = document.getElementById('canvas-container');\n    if (!container) return;\n\n    const scene = new THREE.Scene();\n    scene.background = new THREE.Color(0xF3F3F1);\n    scene.fog = new THREE.Fog(0xF3F3F1, 10, 50);\n\n    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\n    camera.position.z = 30;\n\n    const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));\n    container.appendChild(renderer.domElement);\n\n    const geometry = new THREE.BufferGeometry();\n    const count = 1500;\n    const positions = new Float32Array(count * 3);\n    for (let i = 0; i < count * 3; i++) {\n        positions[i] = (Math.random() - 0.5) * 40;\n    }\n    geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));\n\n    const material = new THREE.PointsMaterial({\n        color: 0x111111,\n        size: 0.15,\n        transparent: true,\n        opacity: 0.7\n    });\n\n    const particles = new THREE.Points(geometry, material);\n    scene.add(particles);\n\n    let mouseX = 0;\n    let mouseY = 0;\n    document.addEventListener('mousemove', (event) => {\n        mouseX = (event.clientX / window.innerWidth) * 2 - 1;\n        mouseY = -(event.clientY / window.innerHeight) * 2 + 1;\n    });\n\n    const clock = new THREE.Clock();\n    function animate() {\n        requestAnimationFrame(animate);\n        const elapsedTime = clock.getElapsedTime();\n        particles.rotation.y = elapsedTime * 0.05;\n        particles.rotation.x = mouseY * 0.1;\n        particles.rotation.y += mouseX * 0.1;\n        renderer.render(scene, camera);\n    }\n    animate();\n\n    window.addEventListener('resize', () => {\n        camera.aspect = window.innerWidth / window.innerHeight;\n        camera.updateProjectionMatrix();\n        renderer.setSize(window.innerWidth, window.innerHeight);\n    });\n}\n\n// --- GSAP ANIMATIONS (ИСПРАВЛЕНО) ---\nfunction initGSAP() {\n    gsap.registerPlugin(ScrollTrigger);\n\n    // 1. Hero Text (Заголовки появляются по очереди)\n    gsap.from(\".reveal-text\", {\n        y: 100,\n        opacity: 0,\n        duration: 1.2,\n        stagger: 0.15,\n        ease: \"power3.out\",\n        delay: 0.5\n    });\n\n    gsap.from(\".reveal-text-delay\", {\n        y: 50,\n        opacity: 0,\n        duration: 1,\n        stagger: 0.2,\n        ease: \"power3.out\",\n        delay: 1.2\n    });\n\n    // 2. Платформа (Карточки) - Loop для каждой карточки отдельно\n    gsap.utils.toArray('.platform__card').forEach((card, i) => {\n        gsap.from(card, {\n            scrollTrigger: {\n                trigger: card, // Триггер - сама карточка\n                start: \"top 85%\", // Анимация начнется, когда верх карточки будет на 85% высоты экрана\n                toggleActions: \"play none none reverse\" // reverse - чтобы при скролле вверх анимация проигрывалась назад (можно убрать)\n            },\n            y: 50,\n            opacity: 0,\n            duration: 0.8,\n            ease: \"power2.out\"\n        });\n    });\n\n    // 3. Список инноваций (li элементы)\n    gsap.utils.toArray('.innovations__list li').forEach((item, i) => {\n        gsap.from(item, {\n            scrollTrigger: {\n                trigger: item,\n                start: \"top 90%\"\n            },\n            x: -30,\n            opacity: 0,\n            duration: 0.6,\n            delay: i * 0.1 // Небольшая задержка для каскадного эффекта\n        });\n    });\n\n    // 4. Изображение инноваций (Раскрытие)\n    const imgWrapper = document.querySelector('.image-reveal-wrapper');\n    const img = document.querySelector('.innovations__img');\n\n    if (imgWrapper && img) {\n        gsap.set(imgWrapper, { clipPath: \"inset(100% 0 0 0)\" });\n        gsap.to(imgWrapper, {\n            clipPath: \"inset(0% 0 0 0)\",\n            duration: 1.5,\n            ease: \"power4.out\",\n            scrollTrigger: {\n                trigger: \".innovations\",\n                start: \"top 75%\",\n                end: \"top 20%\",\n                scrub: 1\n            }\n        });\n        \n        gsap.to(img, {\n            scale: 1,\n            scrollTrigger: {\n                trigger: \".innovations\",\n                start: \"top 75%\",\n                scrub: 1\n            }\n        });\n    }\n\n    // 5. Блог (Карточки) - Loop для каждой статьи\n    gsap.utils.toArray('.blog__card').forEach((card, i) => {\n        gsap.from(card, {\n            scrollTrigger: {\n                trigger: card,\n                start: \"top 85%\"\n            },\n            y: 60,\n            opacity: 0,\n            duration: 0.8,\n            ease: \"power2.out\"\n        });\n    });\n}\n\n// --- MOBILE MENU ---\nfunction initMobileMenu() {\n    const burger = document.querySelector('.header__burger');\n    const menu = document.querySelector('.mobile-menu');\n    const header = document.querySelector('.header');\n    const links = document.querySelectorAll('.mobile-menu__link');\n\n    let isOpen = false;\n\n    // Функция переключения\n    const toggle = () => {\n        isOpen = !isOpen;\n        if (isOpen) {\n            menu.classList.add('active');\n            header.classList.add('menu-open');\n            gsap.to(links, {\n                y: 0,\n                opacity: 1,\n                duration: 0.5,\n                stagger: 0.1,\n                delay: 0.3,\n                ease: \"power2.out\"\n            });\n        } else {\n            menu.classList.remove('active');\n            header.classList.remove('menu-open');\n            gsap.to(links, {\n                y: 20,\n                opacity: 0,\n                duration: 0.3\n            });\n        }\n    };\n\n    burger.addEventListener('click', toggle);\n    \n    // Закрываем меню при клике на ссылку\n    links.forEach(link => {\n        link.addEventListener('click', toggle);\n    });\n}\n\n// --- FORM HANDLING ---\nfunction initForm() {\n    const form = document.getElementById('main-form');\n    if (!form) return;\n\n    const n1 = Math.floor(Math.random() * 10);\n    const n2 = Math.floor(Math.random() * 10);\n    const sum = n1 + n2;\n    const label = document.getElementById('captcha-label');\n    if(label) label.textContent = `Сколько будет ${n1} + ${n2}?`;\n\n    form.addEventListener('submit', (e) => {\n        e.preventDefault();\n        \n        const phone = document.getElementById('phone');\n        const captcha = document.getElementById('captcha');\n        const phoneError = document.getElementById('phone-error');\n        const captchaError = document.getElementById('captcha-error');\n        const successMsg = document.getElementById('form-success');\n        \n        let isValid = true;\n\n        if (!/^\\d+$/.test(phone.value)) {\n            if(phoneError) phoneError.classList.add('visible');\n            isValid = false;\n        } else {\n            if(phoneError) phoneError.classList.remove('visible');\n        }\n\n        if (parseInt(captcha.value) !== sum) {\n            if(captchaError) captchaError.classList.add('visible');\n            isValid = false;\n        } else {\n            if(captchaError) captchaError.classList.remove('visible');\n        }\n\n        if (isValid) {\n            const btn = form.querySelector('button[type=\"submit\"]');\n            const originalText = btn.textContent;\n            btn.textContent = \"Отправка...\";\n            btn.disabled = true;\n\n            setTimeout(() => {\n                form.style.display = 'none';\n                if(successMsg) successMsg.style.display = 'block';\n            }, 1500);\n        }\n    });\n}\n\n// --- COOKIES ---\nfunction initCookies() {\n    const popup = document.getElementById('cookie-popup');\n    const btn = document.getElementById('cookie-accept');\n    \n    if (!popup || !btn) return;\n\n    if (!localStorage.getItem('cookiesAccepted')) {\n        setTimeout(() => {\n            popup.classList.add('show');\n        }, 2000);\n    }\n\n    btn.addEventListener('click', () => {\n        localStorage.setItem('cookiesAccepted', 'true');\n        popup.classList.remove('show');\n    });\n}"],"names":["lenis","raf","time","initThreeJS","initGSAP","initMobileMenu","initForm","initCookies","container","scene","camera","renderer","geometry","count","positions","i","material","particles","mouseX","mouseY","event","clock","animate","elapsedTime","card","item","imgWrapper","img","burger","menu","header","links","isOpen","toggle","link","form","n1","n2","sum","label","e","phone","captcha","phoneError","captchaError","successMsg","isValid","btn","popup"],"mappings":"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"}