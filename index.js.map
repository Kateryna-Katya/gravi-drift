{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\n    // 1. Инициализация иконок и плавного скролла\n    lucide.createIcons();\n\n    const lenis = new Lenis({\n        smooth: true,\n        lerp: 0.1\n    });\n\n    function raf(time) {\n        lenis.raf(time);\n        requestAnimationFrame(raf);\n    }\n    requestAnimationFrame(raf);\n\n    // 2. Three.js Hero Animation (Умная Материя)\n    initThreeJS();\n\n    // 3. GSAP Анимации\n    initGSAP();\n\n    // 4. Мобильное меню\n    initMobileMenu();\n\n    // 5. Логика формы\n    initForm();\n\n    // 6. Cookie Popup\n    initCookies();\n});\n\n// --- THREE.JS HERO ---\nfunction initThreeJS() {\n    const container = document.getElementById('canvas-container');\n    if (!container) return;\n\n    const scene = new THREE.Scene();\n    scene.background = new THREE.Color(0xF3F3F1); // Цвет фона сайта\n    scene.fog = new THREE.Fog(0xF3F3F1, 10, 50);\n\n    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\n    camera.position.z = 30;\n\n    const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));\n    container.appendChild(renderer.domElement);\n\n    // Частицы\n    const geometry = new THREE.BufferGeometry();\n    const count = 1500;\n    const positions = new Float32Array(count * 3);\n\n    for (let i = 0; i < count * 3; i++) {\n        positions[i] = (Math.random() - 0.5) * 40; // Разброс\n    }\n\n    geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));\n\n    const material = new THREE.PointsMaterial({\n        color: 0x111111, // Цвет частиц (черный)\n        size: 0.15,\n        transparent: true,\n        opacity: 0.7\n    });\n\n    const particles = new THREE.Points(geometry, material);\n    scene.add(particles);\n\n    // Мышь\n    let mouseX = 0;\n    let mouseY = 0;\n    \n    // Эффект волны\n    document.addEventListener('mousemove', (event) => {\n        mouseX = (event.clientX / window.innerWidth) * 2 - 1;\n        mouseY = -(event.clientY / window.innerHeight) * 2 + 1;\n    });\n\n    // Анимация\n    const clock = new THREE.Clock();\n\n    function animate() {\n        requestAnimationFrame(animate);\n        const elapsedTime = clock.getElapsedTime();\n\n        // Плавное вращение всей системы\n        particles.rotation.y = elapsedTime * 0.05;\n        particles.rotation.x = mouseY * 0.1;\n        particles.rotation.y += mouseX * 0.1;\n\n        // \"Дыхание\" частиц (Drift)\n        const positions = particles.geometry.attributes.position.array;\n        for(let i = 0; i < count; i++) {\n            // Легкая вибрация\n            // Тут можно добавить сложную математику, но для перфоманса оставим вращение\n        }\n        \n        renderer.render(scene, camera);\n    }\n    animate();\n\n    // Ресайз\n    window.addEventListener('resize', () => {\n        camera.aspect = window.innerWidth / window.innerHeight;\n        camera.updateProjectionMatrix();\n        renderer.setSize(window.innerWidth, window.innerHeight);\n    });\n}\n\n// --- GSAP ANIMATIONS ---\nfunction initGSAP() {\n    gsap.registerPlugin(ScrollTrigger);\n\n    // Hero Text Reveal\n    gsap.from(\".reveal-text\", {\n        y: 100,\n        opacity: 0,\n        duration: 1.2,\n        stagger: 0.1,\n        ease: \"power3.out\",\n        delay: 0.5\n    });\n\n    gsap.from(\".reveal-text-delay\", {\n        y: 50,\n        opacity: 0,\n        duration: 1,\n        stagger: 0.2,\n        ease: \"power3.out\",\n        delay: 1.2\n    });\n\n    // Innovation Image Reveal (Clip Path Animation)\n    // Эффект: Картинка раскрывается из ничего при скролле\n    const imgWrapper = document.querySelector('.image-reveal-wrapper');\n    const img = document.querySelector('.innovations__img');\n\n    if (imgWrapper && img) {\n        gsap.set(imgWrapper, { clipPath: \"inset(100% 0 0 0)\" }); // Скрыто снизу\n        gsap.to(imgWrapper, {\n            clipPath: \"inset(0% 0 0 0)\", // Полное раскрытие\n            duration: 1.5,\n            ease: \"power4.out\",\n            scrollTrigger: {\n                trigger: \".innovations\",\n                start: \"top 70%\",\n                end: \"top 30%\",\n                scrub: 1 // Привязка к скроллу\n            }\n        });\n        \n        // Параллакс эффект для самой картинки внутри\n        gsap.to(img, {\n            scale: 1,\n            scrollTrigger: {\n                trigger: \".innovations\",\n                start: \"top 70%\",\n                scrub: 1\n            }\n        });\n    }\n\n    // Блог - появление карточек\n    gsap.from(\".blog__card\", {\n        y: 50,\n        opacity: 0,\n        duration: 0.8,\n        stagger: 0.2,\n        scrollTrigger: {\n            trigger: \".blog\",\n            start: \"top 80%\"\n        }\n    });\n}\n\n// --- MOBILE MENU ---\nfunction initMobileMenu() {\n    const burger = document.querySelector('.header__burger');\n    const menu = document.querySelector('.mobile-menu');\n    const header = document.querySelector('.header');\n    const links = document.querySelectorAll('.mobile-menu__link');\n    const burgerLines = document.querySelectorAll('.burger-line');\n\n    let isOpen = false;\n\n    burger.addEventListener('click', toggleMenu);\n    \n    // Закрытие при клике на ссылку\n    links.forEach(link => {\n        link.addEventListener('click', toggleMenu);\n    });\n\n    function toggleMenu() {\n        isOpen = !isOpen;\n        \n        if (isOpen) {\n            menu.classList.add('active');\n            header.classList.add('menu-open');\n            // Анимация пунктов меню\n            gsap.to(links, {\n                y: 0,\n                opacity: 1,\n                duration: 0.5,\n                stagger: 0.1,\n                delay: 0.3,\n                ease: \"power2.out\"\n            });\n        } else {\n            menu.classList.remove('active');\n            header.classList.remove('menu-open');\n            // Сброс позиций\n            gsap.to(links, {\n                y: 20,\n                opacity: 0,\n                duration: 0.3\n            });\n        }\n    }\n}\n\n// --- FORM HANDLING ---\nfunction initForm() {\n    const form = document.getElementById('main-form');\n    if (!form) return;\n\n    // Генерация капчи\n    const n1 = Math.floor(Math.random() * 10);\n    const n2 = Math.floor(Math.random() * 10);\n    const sum = n1 + n2;\n    document.getElementById('captcha-label').textContent = `Сколько будет ${n1} + ${n2}?`;\n\n    form.addEventListener('submit', (e) => {\n        e.preventDefault();\n        \n        const phone = document.getElementById('phone');\n        const captcha = document.getElementById('captcha');\n        const phoneError = document.getElementById('phone-error');\n        const captchaError = document.getElementById('captcha-error');\n        let isValid = true;\n\n        // Валидация телефона (Только цифры)\n        if (!/^\\d+$/.test(phone.value)) {\n            phoneError.classList.add('visible');\n            isValid = false;\n        } else {\n            phoneError.classList.remove('visible');\n        }\n\n        // Валидация Капчи\n        if (parseInt(captcha.value) !== sum) {\n            captchaError.classList.add('visible');\n            isValid = false;\n        } else {\n            captchaError.classList.remove('visible');\n        }\n\n        if (isValid) {\n            // Имитация AJAX\n            const btn = form.querySelector('button[type=\"submit\"]');\n            const originalText = btn.textContent;\n            btn.textContent = \"Отправка...\";\n            btn.disabled = true;\n\n            setTimeout(() => {\n                form.style.display = 'none';\n                document.getElementById('form-success').style.display = 'block';\n                // Сброс (если нужно)\n                // form.reset();\n            }, 1500);\n        }\n    });\n}\n\n// --- COOKIES ---\nfunction initCookies() {\n    const popup = document.getElementById('cookie-popup');\n    const btn = document.getElementById('cookie-accept');\n    \n    if (!localStorage.getItem('cookiesAccepted')) {\n        setTimeout(() => {\n            popup.classList.add('show');\n        }, 2000);\n    }\n\n    btn.addEventListener('click', () => {\n        localStorage.setItem('cookiesAccepted', 'true');\n        popup.classList.remove('show');\n    });\n}"],"names":["lenis","raf","time","initThreeJS","initGSAP","initMobileMenu","initForm","initCookies","container","scene","camera","renderer","geometry","count","positions","i","material","particles","mouseX","mouseY","event","clock","animate","elapsedTime","imgWrapper","img","burger","menu","header","links","isOpen","toggleMenu","link","form","n1","n2","sum","phone","captcha","phoneError","captchaError","isValid","btn","popup"],"mappings":"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"}